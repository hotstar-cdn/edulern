<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Review</title>
  <script src="data.js"></script>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family:sans-serif; padding:20px; background:#fdfaf0; max-width:370px; margin:auto; }
    h1 { text-align:center; margin-bottom:16px; font-size:20px;}
    .qBox { margin-bottom:24px; background:#fff; padding:12px; border-radius:8px; }
    .question-img, .option-img { width:100%; border-radius:6px; margin-bottom:8px;}
    .options { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    .option { border:2px solid transparent; border-radius:6px; padding:6px; text-align:center; }
    .option.correct { border-color:green; }
    .option.incorrect { border-color:red; }
    .option.selected { box-shadow: inset 0 0 0 3px blue; }
  </style>
</head>
<body>
  <h1>Review Answers</h1>
  <div id="reviewContainer"></div>

  <script>
    function get(n){return new URLSearchParams(location.search).get(n);}
    const code = get("code"), t = allTests[code];
    const ans = JSON.parse(localStorage.getItem("quiz_"+code+"_ans")||"[]");
    const rc = document.getElementById("reviewContainer");
    if(!t){ rc.textContent="Invalid code."; }
    else {
      t.questions.forEach((q,i)=>{
        const div = document.createElement("div"); div.className="qBox";
        let h = `<p><strong>Q${i+1}. ${q.question}</strong></p>`;
        if(q.questionImage) h += `<img src="${q.questionImage}" class="question-img">`;
        h += `<div class="options">`;
        q.options.forEach((o,j)=>{
          let cls="option";
          if(j===q.answer) cls+=" correct";
          if(j===ans[i] && j!==q.answer) cls+=" incorrect";
          if(j===ans[i]) cls+=" selected";
          h+=`<div class="${cls}">
                ${o.image?`<img src="${o.image}" class="option-img">`:``}
                ${o.text?`<p>${o.text}</p>`:``}
              </div>`;
        });
        h+="</div>";
        div.innerHTML = h;
        rc.appendChild(div);
      });
    }
  </script>
</body>
</html>

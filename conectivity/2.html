<!-- index-audience.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Online Class - Audience</title>
  <style>
    html, body, #root { margin: 0; padding: 0; height: 100%; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script src="https://zegocloud.github.io/zegocloud-uikit-web/index.umd.js"></script>
  <script>
    const appID = 926524225;
    const serverSecret = 'aa23df3fadd7d3cff31afaf86809391f';

    const roomID = prompt("Enter Room ID:");
    const userName = prompt("Enter Your Name:");
    const userID = 'aud_' + Math.floor(Math.random() * 10000);

    async function generateToken(appID, userID, serverSecret) {
      const expire = Math.floor(Date.now() / 1000) + 3600;
      const payload = { app_id: appID, user_id: userID, expire };
      return btoa(JSON.stringify(payload)) + '.' + btoa(serverSecret);
    }

    async function startAudience() {
      const token = await generateToken(appID, userID, serverSecret);
      const kit = new ZegoUIKitPrebuilt(token);

      kit.joinRoom({
        container: document.getElementById('root'),
        scenario: {
          mode: ZegoUIKitPrebuilt.LiveStreaming,
          config: { role: ZegoUIKitPrebuilt.Audience }
        },
        userInfo: { userID, userName },
        roomID
      });
    }

    startAudience();
  </script>
</body>
</html>
